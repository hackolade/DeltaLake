{"version":3,"file":"sql.formatter.js","names":["reservedFunctions","set","window","numeric","string","datetime","aggregate","reservedKeywords","reservedCommands","reservedBinaryCommands","reservedJoins","reservedDependentClauses","SqlFormatter","Tokenizer","dedupe","Object","values","flat","stringTypes","quote","prefixes","identTypes","positionalParams","Formatter"],"sources":["../../src/languages/sql.formatter.ts"],"sourcesContent":["import Formatter from 'src/core/Formatter';\nimport Tokenizer from 'src/core/Tokenizer';\nimport { dedupe } from 'src/utils';\n\nconst reservedFunctions = {\n  // https://jakewheat.github.io/sql-overview/sql-2008-foundation-grammar.html#_6_9_set_function_specification\n  set: ['GROUPING'],\n  // https://jakewheat.github.io/sql-overview/sql-2008-foundation-grammar.html#_6_10_window_function\n  window: ['RANK', 'DENSE_RANK', 'PERCENT_RANK', 'CUME_DIST', 'ROW_NUMBER'],\n  // https://jakewheat.github.io/sql-overview/sql-2008-foundation-grammar.html#_6_27_numeric_value_function\n  numeric: [\n    'POSITION',\n    'OCCURRENCES_REGEX',\n    'POSITION_REGEX',\n    'EXTRACT',\n    'CHAR_LENGTH',\n    'CHARACTER_LENGTH',\n    'OCTET_LENGTH',\n    'CARDINALITY',\n    'ABS',\n    'MOD',\n    'LN',\n    'EXP',\n    'POWER',\n    'SQRT',\n    'FLOOR',\n    'CEIL',\n    'CEILING',\n    'WIDTH_BUCKET',\n  ],\n  // https://jakewheat.github.io/sql-overview/sql-2008-foundation-grammar.html#_6_29_string_value_function\n  string: [\n    'SUBSTRING',\n    'SUBSTRING_REGEX',\n    'UPPER',\n    'LOWER',\n    'CONVERT',\n    'TRANSLATE',\n    'TRANSLATE_REGEX',\n    'TRIM',\n    'OVERLAY',\n    'NORMALIZE',\n    'SPECIFICTYPE',\n  ],\n  // https://jakewheat.github.io/sql-overview/sql-2008-foundation-grammar.html#_6_31_datetime_value_function\n  datetime: ['CURRENT_DATE', 'CURRENT_TIME', 'LOCALTIME', 'CURRENT_TIMESTAMP', 'LOCALTIMESTAMP'],\n  // https://jakewheat.github.io/sql-overview/sql-2008-foundation-grammar.html#_6_38_multiset_value_function\n  // SET serves multiple roles: a SET() function and a SET keyword e.g. in UPDATE table SET ...\n  // multiset: ['SET'], (disabled for now)\n  // https://jakewheat.github.io/sql-overview/sql-2008-foundation-grammar.html#_10_9_aggregate_function\n  aggregate: [\n    'COUNT',\n    'AVG',\n    'MAX',\n    'MIN',\n    'SUM',\n    'EVERY',\n    'ANY',\n    'SOME',\n    'STDDEV_POP',\n    'STDDEV_SAMP',\n    'VAR_SAMP',\n    'VAR_POP',\n    'COLLECT',\n    'FUSION',\n    'INTERSECTION',\n    'COVAR_POP',\n    'COVAR_SAMP',\n    'CORR',\n    'REGR_SLOPE',\n    'REGR_INTERCEPT',\n    'REGR_COUNT',\n    'REGR_R2',\n    'REGR_AVGX',\n    'REGR_AVGY',\n    'REGR_SXX',\n    'REGR_SYY',\n    'REGR_SXY',\n    'PERCENTILE_CONT',\n    'PERCENTILE_DISC',\n  ],\n  // CAST is a pretty complex case, involving multiple forms:\n  // - CAST(col AS int)\n  // - CAST(...) WITH ...\n  // - CAST FROM int\n  // - CREATE CAST(mycol AS int) WITH ...\n  // cast: ['CAST'], (disabled for now)\n};\n\n/**\n * Priority 5 (last)\n * Full list of reserved words\n * any words that are in a higher priority are removed\n */\n// https://jakewheat.github.io/sql-overview/sql-2008-foundation-grammar.html#reserved-word\n// (minus the function names listed above)\nconst reservedKeywords = [\n  'ALL',\n  'ALLOCATE',\n  'ALTER',\n  'ARE',\n  'ARRAY',\n  'AS',\n  'ASENSITIVE',\n  'ASYMMETRIC',\n  'AT',\n  'ATOMIC',\n  'AUTHORIZATION',\n  'BEGIN',\n  'BETWEEN',\n  'BIGINT',\n  'BINARY',\n  'BLOB',\n  'BOOLEAN',\n  'BOTH',\n  'BY',\n  'CALL',\n  'CALLED',\n  'CASCADED',\n  'CAST',\n  'CHAR',\n  'CHARACTER',\n  'CHECK',\n  'CLOB',\n  'CLOSE',\n  'COALESCE',\n  'COLLATE',\n  'COLUMN',\n  'COMMIT',\n  'CONDITION',\n  'CONNECT',\n  'CONSTRAINT',\n  'CORRESPONDING',\n  'CREATE',\n  'CROSS',\n  'CUBE',\n  'CURRENT',\n  'CURRENT_CATALOG',\n  'CURRENT_DEFAULT_TRANSFORM_GROUP',\n  'CURRENT_PATH',\n  'CURRENT_ROLE',\n  'CURRENT_SCHEMA',\n  'CURRENT_TRANSFORM_GROUP_FOR_TYPE',\n  'CURRENT_USER',\n  'CURSOR',\n  'CYCLE',\n  'DATE',\n  'DAY',\n  'DEALLOCATE',\n  'DEC',\n  'DECIMAL',\n  'DECLARE',\n  'DEFAULT',\n  'DELETE',\n  'DEREF',\n  'DESCRIBE',\n  'DETERMINISTIC',\n  'DISCONNECT',\n  'DISTINCT',\n  'DOUBLE',\n  'DROP',\n  'DYNAMIC',\n  'EACH',\n  'ELEMENT',\n  'END-EXEC',\n  'ESCAPE',\n  'EXCEPT',\n  'EXEC',\n  'EXECUTE',\n  'EXISTS',\n  'EXTERNAL',\n  'FALSE',\n  'FETCH',\n  'FILTER',\n  'FLOAT',\n  'FOR',\n  'FOREIGN',\n  'FREE',\n  'FROM',\n  'FULL',\n  'FUNCTION',\n  'GET',\n  'GLOBAL',\n  'GRANT',\n  'GROUP',\n  'HAVING',\n  'HOLD',\n  'HOUR',\n  'IDENTITY',\n  'IN',\n  'INDICATOR',\n  'INNER',\n  'INOUT',\n  'INSENSITIVE',\n  'INSERT',\n  'INT',\n  'INTEGER',\n  'INTERSECT',\n  'INTERVAL',\n  'INTO',\n  'IS',\n  'LANGUAGE',\n  'LARGE',\n  'LATERAL',\n  'LEADING',\n  'LEFT',\n  'LIKE',\n  'LIKE_REGEX',\n  'LOCAL',\n  'MATCH',\n  'MEMBER',\n  'MERGE',\n  'METHOD',\n  'MINUTE',\n  'MODIFIES',\n  'MODULE',\n  'MONTH',\n  'MULTISET',\n  'NATIONAL',\n  'NATURAL',\n  'NCHAR',\n  'NCLOB',\n  'NEW',\n  'NO',\n  'NONE',\n  'NOT',\n  'NULL',\n  'NULLIF',\n  'NUMERIC',\n  'OF',\n  'OLD',\n  'ON DELETE',\n  'ON UPDATE',\n  'ONLY',\n  'OPEN',\n  'ORDER',\n  'OUT',\n  'OUTER',\n  'OVER',\n  'OVERLAPS',\n  'PARAMETER',\n  'PARTITION',\n  'PRECISION',\n  'PREPARE',\n  'PRIMARY',\n  'PROCEDURE',\n  'RANGE',\n  'READS',\n  'REAL',\n  'RECURSIVE',\n  'REF',\n  'REFERENCES',\n  'REFERENCING',\n  'RELEASE',\n  'RESULT',\n  'RETURN',\n  'RETURNS',\n  'REVOKE',\n  'RIGHT',\n  'ROLLBACK',\n  'ROLLUP',\n  'ROW',\n  'ROWS',\n  'SAVEPOINT',\n  'SCOPE',\n  'SCROLL',\n  'SEARCH',\n  'SECOND',\n  'SELECT',\n  'SENSITIVE',\n  'SESSION_USER',\n  'SET',\n  'SIMILAR',\n  'SMALLINT',\n  'SPECIFIC',\n  'SQL',\n  'SQLEXCEPTION',\n  'SQLSTATE',\n  'SQLWARNING',\n  'START',\n  'STATIC',\n  'SUBMULTISET',\n  'SYMMETRIC',\n  'SYSTEM',\n  'SYSTEM_USER',\n  'TABLE',\n  'TABLESAMPLE',\n  'THEN',\n  'TIME',\n  'TIMESTAMP',\n  'TIMEZONE_HOUR',\n  'TIMEZONE_MINUTE',\n  'TO',\n  'TRAILING',\n  'TRANSLATION',\n  'TREAT',\n  'TRIGGER',\n  'TRUE',\n  'UESCAPE',\n  'UNION',\n  'UNIQUE',\n  'UNKNOWN',\n  'UNNEST',\n  'UPDATE',\n  'USER',\n  'VALUE',\n  'VALUES',\n  'VARBINARY',\n  'VARCHAR',\n  'VARYING',\n  'WHENEVER',\n  'WINDOW',\n  'WITHIN',\n  'WITHOUT',\n  'YEAR',\n];\n\n/**\n * Priority 1 (first)\n * keywords that begin a new statement\n * will begin new indented block\n */\nconst reservedCommands = [\n  'ADD',\n  'ALTER COLUMN',\n  'ALTER TABLE',\n  'CREATE TABLE',\n  'DROP TABLE',\n  'DELETE FROM',\n  'FETCH FIRST',\n  'FETCH NEXT',\n  'FETCH PRIOR',\n  'FETCH LAST',\n  'FETCH ABSOLUTE',\n  'FETCH RELATIVE',\n  'FROM',\n  'GROUP BY',\n  'HAVING',\n  'INSERT INTO',\n  'LIMIT',\n  'OFFSET',\n  'ORDER BY',\n  'SELECT',\n  'SET SCHEMA',\n  'SET',\n  'UPDATE',\n  'VALUES',\n  'WHERE',\n  'WITH',\n];\n\nconst reservedBinaryCommands = [\n  'INTERSECT',\n  'INTERSECT ALL',\n  'INTERSECT DISTINCT',\n  'UNION',\n  'UNION ALL',\n  'UNION DISTINCT',\n  'EXCEPT',\n  'EXCEPT ALL',\n  'EXCEPT DISTINCT',\n];\n\nconst reservedJoins = [\n  'JOIN',\n  'INNER JOIN',\n  'LEFT JOIN',\n  'LEFT OUTER JOIN',\n  'RIGHT JOIN',\n  'RIGHT OUTER JOIN',\n  'FULL JOIN',\n  'FULL OUTER JOIN',\n  'CROSS JOIN',\n  'NATURAL JOIN',\n];\n\n/**\n * Priority 3\n * keywords that follow a previous Statement, must be attached to subsequent data\n * can be fully inline or on newline with optional indent\n */\nconst reservedDependentClauses = ['WHEN', 'ELSE'];\n\nexport default class SqlFormatter extends Formatter {\n  static operators = [];\n\n  tokenizer() {\n    return new Tokenizer({\n      reservedCommands,\n      reservedBinaryCommands,\n      reservedJoins,\n      reservedDependentClauses,\n      reservedKeywords: dedupe([...reservedKeywords, ...Object.values(reservedFunctions).flat()]),\n      stringTypes: [{ quote: \"''\", prefixes: ['X'] }],\n      identTypes: [`\"\"`, '``'],\n      positionalParams: true,\n    });\n  }\n}\n"],"mappings":"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"}