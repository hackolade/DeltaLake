{"version":3,"file":"bigquery.formatter.js","names":["reservedFunctions","aead","aggregateAnalytic","aggregate","approximateAggregate","array","bitwise","conversion","date","datetime","debugging","federatedQuery","geography","hash","hll","interval","json","math","navigation","net","numbering","security","statisticalAggregate","string","time","timestamp","uuid","conditional","legacyAggregate","legacyBitwise","legacyCasting","legacyComparison","legacyDatetime","legacyIp","legacyJson","legacyMath","legacyRegex","legacyString","legacyTableWildcard","legacyUrl","legacyWindow","legacyMisc","other","reservedKeywords","keywords","datatypes","stringFormat","misc","reservedCommands","reservedBinaryCommands","reservedJoins","reservedDependentClauses","BigQueryFormatter","Tokenizer","dedupe","Object","values","flat","openParens","closeParens","stringTypes","quote","prefixes","identTypes","identChars","dashes","positionalParams","namedParamTypes","quotedParamTypes","lineCommentTypes","operators","preprocess","Formatter","tokens","detectArraySubscripts","combineParameterizedTypes","prevToken","EOF_TOKEN","map","token","value","type","TokenType","RESERVED_KEYWORD","processed","i","length","nextToken","isToken","ARRAY","STRUCT","endIndex","findClosingAngleBracketIndex","typeDefTokens","slice","push","t","join","text","startIndex","level"],"sources":["../../src/languages/bigquery.formatter.ts"],"sourcesContent":["import Formatter from 'src/core/Formatter';\nimport Tokenizer from 'src/core/Tokenizer';\nimport { EOF_TOKEN, isToken, TokenType, type Token } from 'src/core/token';\nimport { dedupe } from 'src/utils';\n\n/**\n * Priority 5 (last)\n * Full list of reserved functions\n * distinct from Keywords due to interaction with parentheses\n */\nconst reservedFunctions = {\n  // https://cloud.google.com/bigquery/docs/reference/standard-sql/aead_encryption_functions\n  aead: [\n    'KEYS.NEW_KEYSET',\n    'KEYS.ADD_KEY_FROM_RAW_BYTES',\n    'AEAD.DECRYPT_BYTES',\n    'AEAD.DECRYPT_STRING',\n    'AEAD.ENCRYPT',\n    'KEYS.KEYSET_CHAIN',\n    'KEYS.KEYSET_FROM_JSON',\n    'KEYS.KEYSET_TO_JSON',\n    'KEYS.ROTATE_KEYSET',\n    'KEYS.KEYSET_LENGTH',\n  ],\n  // https://cloud.google.com/bigquery/docs/reference/standard-sql/aggregate_analytic_functions\n  aggregateAnalytic: [\n    'ANY_VALUE',\n    'ARRAY_AGG',\n    'AVG',\n    'CORR',\n    'COUNT',\n    'COUNTIF',\n    'COVAR_POP',\n    'COVAR_SAMP',\n    'MAX',\n    'MIN',\n    'ST_CLUSTERDBSCAN',\n    'STDDEV_POP',\n    'STDDEV_SAMP',\n    'STRING_AGG',\n    'SUM',\n    'VAR_POP',\n    'VAR_SAMP',\n  ],\n  // https://cloud.google.com/bigquery/docs/reference/standard-sql/aggregate_functions\n  aggregate: [\n    'ANY_VALUE',\n    'ARRAY_AGG',\n    'ARRAY_CONCAT_AGG',\n    'AVG',\n    'BIT_AND',\n    'BIT_OR',\n    'BIT_XOR',\n    'COUNT',\n    'COUNTIF',\n    'LOGICAL_AND',\n    'LOGICAL_OR',\n    'MAX',\n    'MIN',\n    'STRING_AGG',\n    'SUM',\n  ],\n  // https://cloud.google.com/bigquery/docs/reference/standard-sql/approximate_aggregate_functions\n  approximateAggregate: [\n    'APPROX_COUNT_DISTINCT',\n    'APPROX_QUANTILES',\n    'APPROX_TOP_COUNT',\n    'APPROX_TOP_SUM',\n  ],\n  // https://cloud.google.com/bigquery/docs/reference/standard-sql/array_functions\n  array: [\n    'ARRAY',\n    'ARRAY_CONCAT',\n    'ARRAY_LENGTH',\n    'ARRAY_TO_STRING',\n    'GENERATE_ARRAY',\n    'GENERATE_DATE_ARRAY',\n    'GENERATE_TIMESTAMP_ARRAY',\n    'ARRAY_REVERSE',\n    'OFFSET',\n    'SAFE_OFFSET',\n    'ORDINAL',\n    'SAFE_ORDINAL',\n  ],\n  // https://cloud.google.com/bigquery/docs/reference/standard-sql/bit_functions\n  bitwise: ['BIT_COUNT'],\n  // https://cloud.google.com/bigquery/docs/reference/standard-sql/conversion_functions\n  conversion: [\n    // 'CASE',\n    'PARSE_BIGNUMERIC',\n    'PARSE_NUMERIC',\n    'SAFE_CAST',\n  ],\n  // https://cloud.google.com/bigquery/docs/reference/standard-sql/date_functions\n  date: [\n    'CURRENT_DATE',\n    'EXTRACT',\n    'DATE',\n    'DATE_ADD',\n    'DATE_SUB',\n    'DATE_DIFF',\n    'DATE_TRUNC',\n    'DATE_FROM_UNIX_DATE',\n    'FORMAT_DATE',\n    'LAST_DAY',\n    'PARSE_DATE',\n    'UNIX_DATE',\n  ],\n  // https://cloud.google.com/bigquery/docs/reference/standard-sql/datetime_functions\n  datetime: [\n    'CURRENT_DATETIME',\n    'DATETIME',\n    'EXTRACT',\n    'DATETIME_ADD',\n    'DATETIME_SUB',\n    'DATETIME_DIFF',\n    'DATETIME_TRUNC',\n    'FORMAT_DATETIME',\n    'LAST_DAY',\n    'PARSE_DATETIME',\n  ],\n  // https://cloud.google.com/bigquery/docs/reference/standard-sql/debugging_functions\n  debugging: ['ERROR'],\n  // https://cloud.google.com/bigquery/docs/reference/standard-sql/federated_query_functions\n  federatedQuery: ['EXTERNAL_QUERY'],\n  // https://cloud.google.com/bigquery/docs/reference/standard-sql/geography_functions\n  geography: [\n    'S2_CELLIDFROMPOINT',\n    'S2_COVERINGCELLIDS',\n    'ST_ANGLE',\n    'ST_AREA',\n    'ST_ASBINARY',\n    'ST_ASGEOJSON',\n    'ST_ASTEXT',\n    'ST_AZIMUTH',\n    'ST_BOUNDARY',\n    'ST_BOUNDINGBOX',\n    'ST_BUFFER',\n    'ST_BUFFERWITHTOLERANCE',\n    'ST_CENTROID',\n    'ST_CENTROID_AGG',\n    'ST_CLOSESTPOINT',\n    'ST_CLUSTERDBSCAN',\n    'ST_CONTAINS',\n    'ST_CONVEXHULL',\n    'ST_COVEREDBY',\n    'ST_COVERS',\n    'ST_DIFFERENCE',\n    'ST_DIMENSION',\n    'ST_DISJOINT',\n    'ST_DISTANCE',\n    'ST_DUMP',\n    'ST_DWITHIN',\n    'ST_ENDPOINT',\n    'ST_EQUALS',\n    'ST_EXTENT',\n    'ST_EXTERIORRING',\n    'ST_GEOGFROM',\n    'ST_GEOGFROMGEOJSON',\n    'ST_GEOGFROMTEXT',\n    'ST_GEOGFROMWKB',\n    'ST_GEOGPOINT',\n    'ST_GEOGPOINTFROMGEOHASH',\n    'ST_GEOHASH',\n    'ST_GEOMETRYTYPE',\n    'ST_INTERIORRINGS',\n    'ST_INTERSECTION',\n    'ST_INTERSECTS',\n    'ST_INTERSECTSBOX',\n    'ST_ISCOLLECTION',\n    'ST_ISEMPTY',\n    'ST_LENGTH',\n    'ST_MAKELINE',\n    'ST_MAKEPOLYGON',\n    'ST_MAKEPOLYGONORIENTED',\n    'ST_MAXDISTANCE',\n    'ST_NPOINTS',\n    'ST_NUMGEOMETRIES',\n    'ST_NUMPOINTS',\n    'ST_PERIMETER',\n    'ST_POINTN',\n    'ST_SIMPLIFY',\n    'ST_SNAPTOGRID',\n    'ST_STARTPOINT',\n    'ST_TOUCHES',\n    'ST_UNION',\n    'ST_UNION_AGG',\n    'ST_WITHIN',\n    'ST_X',\n    'ST_Y',\n  ],\n  // https://cloud.google.com/bigquery/docs/reference/standard-sql/hash_functions\n  hash: ['FARM_FINGERPRINT', 'MD5', 'SHA1', 'SHA256', 'SHA512'],\n  // https://cloud.google.com/bigquery/docs/reference/standard-sql/hll_functions\n  hll: ['HLL_COUNT.INIT', 'HLL_COUNT.MERGE', 'HLL_COUNT.MERGE_PARTIAL', 'HLL_COUNT.EXTRACT'],\n  // https://cloud.google.com/bigquery/docs/reference/standard-sql/interval_functions\n  interval: ['MAKE_INTERVAL', 'EXTRACT', 'JUSTIFY_DAYS', 'JUSTIFY_HOURS', 'JUSTIFY_INTERVAL'],\n  // https://cloud.google.com/bigquery/docs/reference/standard-sql/json_functions\n  json: [\n    'JSON_EXTRACT',\n    'JSON_QUERY',\n    'JSON_EXTRACT_SCALAR',\n    'JSON_VALUE',\n    'JSON_EXTRACT_ARRAY',\n    'JSON_QUERY_ARRAY',\n    'JSON_EXTRACT_STRING_ARRAY',\n    'JSON_VALUE_ARRAY',\n    'TO_JSON_STRING',\n  ],\n  // https://cloud.google.com/bigquery/docs/reference/standard-sql/mathematical_functions\n  math: [\n    'ABS',\n    'SIGN',\n    'IS_INF',\n    'IS_NAN',\n    'IEEE_DIVIDE',\n    'RAND',\n    'SQRT',\n    'POW',\n    'POWER',\n    'EXP',\n    'LN',\n    'LOG',\n    'LOG10',\n    'GREATEST',\n    'LEAST',\n    'DIV',\n    'SAFE_DIVIDE',\n    'SAFE_MULTIPLY',\n    'SAFE_NEGATE',\n    'SAFE_ADD',\n    'SAFE_SUBTRACT',\n    'MOD',\n    'ROUND',\n    'TRUNC',\n    'CEIL',\n    'CEILING',\n    'FLOOR',\n    'COS',\n    'COSH',\n    'ACOS',\n    'ACOSH',\n    'SIN',\n    'SINH',\n    'ASIN',\n    'ASINH',\n    'TAN',\n    'TANH',\n    'ATAN',\n    'ATANH',\n    'ATAN2',\n    'RANGE_BUCKET',\n  ],\n  // https://cloud.google.com/bigquery/docs/reference/standard-sql/navigation_functions\n  navigation: [\n    'FIRST_VALUE',\n    'LAST_VALUE',\n    'NTH_VALUE',\n    'LEAD',\n    'LAG',\n    'PERCENTILE_CONT',\n    'PERCENTILE_DISC',\n  ],\n  // https://cloud.google.com/bigquery/docs/reference/standard-sql/net_functions\n  net: [\n    'NET.IP_FROM_STRING',\n    'NET.SAFE_IP_FROM_STRING',\n    'NET.IP_TO_STRING',\n    'NET.IP_NET_MASK',\n    'NET.IP_TRUNC',\n    'NET.IPV4_FROM_INT64',\n    'NET.IPV4_TO_INT64',\n    'NET.HOST',\n    'NET.PUBLIC_SUFFIX',\n    'NET.REG_DOMAIN',\n  ],\n  // https://cloud.google.com/bigquery/docs/reference/standard-sql/numbering_functions\n  numbering: ['RANK', 'DENSE_RANK', 'PERCENT_RANK', 'CUME_DIST', 'NTILE', 'ROW_NUMBER'],\n  // https://cloud.google.com/bigquery/docs/reference/standard-sql/security_functions\n  security: ['SESSION_USER'],\n  // https://cloud.google.com/bigquery/docs/reference/standard-sql/statistical_aggregate_functions\n  statisticalAggregate: [\n    'CORR',\n    'COVAR_POP',\n    'COVAR_SAMP',\n    'STDDEV_POP',\n    'STDDEV_SAMP',\n    'STDDEV',\n    'VAR_POP',\n    'VAR_SAMP',\n    'VARIANCE',\n  ],\n  // https://cloud.google.com/bigquery/docs/reference/standard-sql/string_functions\n  string: [\n    'ASCII',\n    'BYTE_LENGTH',\n    'CHAR_LENGTH',\n    'CHARACTER_LENGTH',\n    'CHR',\n    'CODE_POINTS_TO_BYTES',\n    'CODE_POINTS_TO_STRING',\n    'CONCAT',\n    'CONTAINS_SUBSTR',\n    'ENDS_WITH',\n    'FORMAT',\n    'FROM_BASE32',\n    'FROM_BASE64',\n    'FROM_HEX',\n    'INITCAP',\n    'INSTR',\n    'LEFT',\n    'LENGTH',\n    'LPAD',\n    'LOWER',\n    'LTRIM',\n    'NORMALIZE',\n    'NORMALIZE_AND_CASEFOLD',\n    'OCTET_LENGTH',\n    'REGEXP_CONTAINS',\n    'REGEXP_EXTRACT',\n    'REGEXP_EXTRACT_ALL',\n    'REGEXP_INSTR',\n    'REGEXP_REPLACE',\n    'REGEXP_SUBSTR',\n    'REPLACE',\n    'REPEAT',\n    'REVERSE',\n    'RIGHT',\n    'RPAD',\n    'RTRIM',\n    'SAFE_CONVERT_BYTES_TO_STRING',\n    'SOUNDEX',\n    'SPLIT',\n    'STARTS_WITH',\n    'STRPOS',\n    'SUBSTR',\n    'SUBSTRING',\n    'TO_BASE32',\n    'TO_BASE64',\n    'TO_CODE_POINTS',\n    'TO_HEX',\n    'TRANSLATE',\n    'TRIM',\n    'UNICODE',\n    'UPPER',\n  ],\n  // https://cloud.google.com/bigquery/docs/reference/standard-sql/time_functions\n  time: [\n    'CURRENT_TIME',\n    'TIME',\n    'EXTRACT',\n    'TIME_ADD',\n    'TIME_SUB',\n    'TIME_DIFF',\n    'TIME_TRUNC',\n    'FORMAT_TIME',\n    'PARSE_TIME',\n  ],\n  // https://cloud.google.com/bigquery/docs/reference/standard-sql/timestamp_functions\n  timestamp: [\n    'CURRENT_TIMESTAMP',\n    'EXTRACT',\n    'STRING',\n    'TIMESTAMP',\n    'TIMESTAMP_ADD',\n    'TIMESTAMP_SUB',\n    'TIMESTAMP_DIFF',\n    'TIMESTAMP_TRUNC',\n    'FORMAT_TIMESTAMP',\n    'PARSE_TIMESTAMP',\n    'TIMESTAMP_SECONDS',\n    'TIMESTAMP_MILLIS',\n    'TIMESTAMP_MICROS',\n    'UNIX_SECONDS',\n    'UNIX_MILLIS',\n    'UNIX_MICROS',\n  ],\n  // https://cloud.google.com/bigquery/docs/reference/standard-sql/uuid_functions\n  uuid: ['GENERATE_UUID'],\n  // https://cloud.google.com/bigquery/docs/reference/standard-sql/conditional_expressions\n  conditional: ['COALESCE', 'IF', 'IFNULL', 'NULLIF'],\n  // https://cloud.google.com/bigquery/docs/reference/legacy-sql\n  legacyAggregate: [\n    'AVG',\n    'BIT_AND',\n    'BIT_OR',\n    'BIT_XOR',\n    'CORR',\n    'COUNT',\n    'COVAR_POP',\n    'COVAR_SAMP',\n    'EXACT_COUNT_DISTINCT',\n    'FIRST',\n    'GROUP_CONCAT',\n    'GROUP_CONCAT_UNQUOTED',\n    'LAST',\n    'MAX',\n    'MIN',\n    'NEST',\n    'NTH',\n    'QUANTILES',\n    'STDDEV',\n    'STDDEV_POP',\n    'STDDEV_SAMP',\n    'SUM',\n    'TOP',\n    'UNIQUE',\n    'VARIANCE',\n    'VAR_POP',\n    'VAR_SAMP',\n  ],\n  legacyBitwise: ['BIT_COUNT'],\n  legacyCasting: ['BOOLEAN', 'BYTES', 'CAST', 'FLOAT', 'HEX_STRING', 'INTEGER', 'STRING'],\n  legacyComparison: [\n    // expr 'IN',\n    'COALESCE',\n    'GREATEST',\n    'IFNULL',\n    'IS_INF',\n    'IS_NAN',\n    'IS_EXPLICITLY_DEFINED',\n    'LEAST',\n    'NVL',\n  ],\n  legacyDatetime: [\n    'CURRENT_DATE',\n    'CURRENT_TIME',\n    'CURRENT_TIMESTAMP',\n    'DATE',\n    'DATE_ADD',\n    'DATEDIFF',\n    'DAY',\n    'DAYOFWEEK',\n    'DAYOFYEAR',\n    'FORMAT_UTC_USEC',\n    'HOUR',\n    'MINUTE',\n    'MONTH',\n    'MSEC_TO_TIMESTAMP',\n    'NOW',\n    'PARSE_UTC_USEC',\n    'QUARTER',\n    'SEC_TO_TIMESTAMP',\n    'SECOND',\n    'STRFTIME_UTC_USEC',\n    'TIME',\n    'TIMESTAMP',\n    'TIMESTAMP_TO_MSEC',\n    'TIMESTAMP_TO_SEC',\n    'TIMESTAMP_TO_USEC',\n    'USEC_TO_TIMESTAMP',\n    'UTC_USEC_TO_DAY',\n    'UTC_USEC_TO_HOUR',\n    'UTC_USEC_TO_MONTH',\n    'UTC_USEC_TO_WEEK',\n    'UTC_USEC_TO_YEAR',\n    'WEEK',\n    'YEAR',\n  ],\n  legacyIp: ['FORMAT_IP', 'PARSE_IP', 'FORMAT_PACKED_IP', 'PARSE_PACKED_IP'],\n  legacyJson: ['JSON_EXTRACT', 'JSON_EXTRACT_SCALAR'],\n  legacyMath: [\n    'ABS',\n    'ACOS',\n    'ACOSH',\n    'ASIN',\n    'ASINH',\n    'ATAN',\n    'ATANH',\n    'ATAN2',\n    'CEIL',\n    'COS',\n    'COSH',\n    'DEGREES',\n    'EXP',\n    'FLOOR',\n    'LN',\n    'LOG',\n    'LOG2',\n    'LOG10',\n    'PI',\n    'POW',\n    'RADIANS',\n    'RAND',\n    'ROUND',\n    'SIN',\n    'SINH',\n    'SQRT',\n    'TAN',\n    'TANH',\n  ],\n  legacyRegex: ['REGEXP_MATCH', 'REGEXP_EXTRACT', 'REGEXP_REPLACE'],\n  legacyString: [\n    'CONCAT',\n    // expr CONTAINS 'str'\n    'INSTR',\n    'LEFT',\n    'LENGTH',\n    'LOWER',\n    'LPAD',\n    'LTRIM',\n    'REPLACE',\n    'RIGHT',\n    'RPAD',\n    'RTRIM',\n    'SPLIT',\n    'SUBSTR',\n    'UPPER',\n  ],\n  legacyTableWildcard: ['TABLE_DATE_RANGE', 'TABLE_DATE_RANGE_STRICT', 'TABLE_QUERY'],\n  legacyUrl: ['HOST', 'DOMAIN', 'TLD'],\n  legacyWindow: [\n    'AVG',\n    'COUNT',\n    'MAX',\n    'MIN',\n    'STDDEV',\n    'SUM',\n    'CUME_DIST',\n    'DENSE_RANK',\n    'FIRST_VALUE',\n    'LAG',\n    'LAST_VALUE',\n    'LEAD',\n    'NTH_VALUE',\n    'NTILE',\n    'PERCENT_RANK',\n    'PERCENTILE_CONT',\n    'PERCENTILE_DISC',\n    'RANK',\n    'RATIO_TO_REPORT',\n    'ROW_NUMBER',\n  ],\n  legacyMisc: [\n    'CURRENT_USER',\n    'EVERY',\n    'FROM_BASE64',\n    'HASH',\n    'FARM_FINGERPRINT',\n    'IF',\n    'POSITION',\n    'SHA1',\n    'SOME',\n    'TO_BASE64',\n  ],\n  other: ['BQ.JOBS.CANCEL', 'BQ.REFRESH_MATERIALIZED_VIEW'],\n};\n\n/**\n * Priority 5 (last)\n * Full list of reserved words\n * any words that are in a higher priority are removed\n */\nconst reservedKeywords = {\n  keywords: [\n    'ALL',\n    // 'AND',\n    'ANY',\n    // 'ARRAY',\n    'AS',\n    'ASC',\n    'ASSERT_ROWS_MODIFIED',\n    'AT',\n    'BETWEEN',\n    'BY',\n    // 'CASE',\n    'CAST',\n    'COLLATE',\n    'CONTAINS',\n    // 'CREATE',\n    // 'CROSS',\n    'CUBE',\n    'CURRENT',\n    'DEFAULT',\n    'DEFINE',\n    'DESC',\n    'DISTINCT',\n    // 'ELSE',\n    // 'END',\n    'ENUM',\n    'ESCAPE',\n    // 'EXCEPT',\n    // 'EXCLUDE',\n    'EXISTS',\n    'EXTRACT',\n    'FALSE',\n    // 'FETCH',\n    'FOLLOWING',\n    'FOR',\n    // 'FROM',\n    'FULL',\n    // 'GROUP',\n    'GROUPING',\n    'GROUPS',\n    'HASH',\n    // 'HAVING',\n    'IF',\n    'IGNORE',\n    'IN',\n    // 'INNER',\n    // 'INTERSECT',\n    // 'INTERVAL',\n    'INTO',\n    'IS',\n    // 'JOIN',\n    // 'LATERAL',\n    // 'LEFT',\n    'LIKE',\n    // 'LIMIT',\n    'LOOKUP',\n    // 'MERGE',\n    // 'NATURAL',\n    'NEW',\n    'NO',\n    'NOT',\n    'NULL',\n    'NULLS',\n    'OF',\n    // 'ON',\n    // 'OR',\n    // 'ORDER',\n    // 'OUTER',\n    'OVER',\n    'PARTITION',\n    'PRECEDING',\n    'PROTO',\n    'RANGE',\n    'RECURSIVE',\n    'RESPECT',\n    // 'RIGHT',\n    'ROLLUP',\n    'ROWS',\n    // 'SELECT',\n    // 'SET',\n    'SOME',\n    // 'STRUCT',\n    'TABLE',\n    // 'TABLESAMPLE',\n    'THEN',\n    'TO',\n    'TREAT',\n    'TRUE',\n    'UNBOUNDED',\n    // 'UNION',\n    // 'UNNEST',\n    // 'USING',\n    // 'WHEN',\n    // 'WHERE',\n    // 'WINDOW',\n    // 'WITH',\n    'WITHIN',\n  ],\n  datatypes: [\n    'ARRAY', // parametric, ARRAY<T>\n    'BOOL',\n    'BYTES', // parameterised, BYTES(Length)\n    'DATE',\n    'DATETIME',\n    'GEOGRAPHY',\n    'INTERVAL',\n    'INT64',\n    'INT',\n    'SMALLINT',\n    'INTEGER',\n    'BIGINT',\n    'TINYINT',\n    'BYTEINT',\n    'NUMERIC', // parameterised, NUMERIC(Precision[, Scale])\n    'DECIMAL', // parameterised, DECIMAL(Precision[, Scale])\n    'BIGNUMERIC', // parameterised, BIGNUMERIC(Precision[, Scale])\n    'BIGDECIMAL', // parameterised, BIGDECIMAL(Precision[, Scale])\n    'FLOAT64',\n    'STRING', // parameterised, STRING(Length)\n    'STRUCT', // parametric, STRUCT<T>\n    'TIME',\n    'TIMEZONE',\n  ],\n  // https://cloud.google.com/bigquery/docs/reference/standard-sql/conversion_functions#formatting_syntax\n  stringFormat: ['HEX', 'BASEX', 'BASE64M', 'ASCII', 'UTF-8', 'UTF8'],\n  misc: ['SAFE'],\n};\n\n/**\n * Priority 1 (first)\n * keywords that begin a new statement\n * will begin new indented block\n */\nconst reservedCommands = [\n  // DQL, https://cloud.google.com/bigquery/docs/reference/standard-sql/query-syntax\n  'SELECT',\n  'FROM',\n  'UNNEST',\n  'PIVOT',\n  'UNPIVOT',\n  'TABLESAMPLE SYSTEM',\n  'WHERE',\n  'GROUP BY',\n  'HAVING',\n  'ORDER BY',\n  'QUALIFY',\n  'WINDOW',\n  'LIMIT',\n  'OFFSET',\n  'WITH',\n  'OMIT RECORD IF', // legacy\n  // DML, https://cloud.google.com/bigquery/docs/reference/standard-sql/dml-syntax\n  'INSERT',\n  'INSERT INTO',\n  'VALUES',\n  'DELETE',\n  'DELETE FROM',\n  'TRUNCATE TABLE',\n  'UPDATE',\n  'MERGE',\n  'MERGE INTO',\n  // 'USING',\n  // DDL, https://cloud.google.com/bigquery/docs/reference/standard-sql/data-definition-language\n  'SET SCHEMA', // added\n  'CREATE SCHEMA',\n  'CREATE TABLE',\n  'CREATE TABLE IF NOT EXISTS',\n  'CREATE TEMP TABLE',\n  'CREATE TEMP TABLE IF NOT EXISTS',\n  'CREATE TEMPORARY TABLE',\n  'CREATE TEMPORARY TABLE IF NOT EXISTS',\n  'CREATE OR REPLACE TABLE',\n  'CREATE OR REPLACE TEMP TABLE',\n  'CREATE OR REPLACE TEMPORARY TABLE',\n  'CREATE TABLE LIKE',\n  'CREATE TABLE COPY',\n  'CREATE SNAPSHOT TABLE',\n  'CREATE TABLE CLONE',\n  'CREATE VIEW',\n  'CREATE VIEW IF NOT EXISTS',\n  'CREATE OR REPLACE VIEW',\n  'CREATE MATERIALIZED VIEW',\n  'CREATE EXTERNAL TABLE',\n  'CREATE FUNCTION',\n  'CREATE TABLE FUNCTION',\n  'CREATE PROCEDURE',\n  'CREATE ROW ACCESS POLICY',\n  'ALTER SCHEMA SET OPTIONS',\n  'ALTER TABLE SET OPTIONS',\n  'ALTER TABLE ADD COLUMN',\n  'ALTER TABLE RENAME TO',\n  'ALTER TABLE DROP COLUMN',\n  'ALTER COLUMN SET OPTIONS',\n  'ALTER COLUMN DROP NOT NULL',\n  'ALTER COLUMN SET DATA TYPE',\n  'ALTER VIEW SET OPTIONS',\n  'ALTER MATERIALIZED VIEW SET OPTIONS',\n  'DROP SCHEMA',\n  'DROP TABLE',\n  'DROP SNAPSHOT TABLE',\n  'DROP EXTERNAL TABLE',\n  'DROP VIEW',\n  'DROP MATERIALIZED VIEW',\n  'DROP FUNCTION',\n  'DROP TABLE FUNCTION',\n  'DROP PROCEDURE',\n  'DROP ROW ACCESS POLICY',\n  // DCL, https://cloud.google.com/bigquery/docs/reference/standard-sql/data-control-language\n  'GRANT',\n  'REVOKE',\n  'CREATE CAPACITY',\n  'CREATE RESERVATION',\n  'CREATE ASSIGNMENT',\n  'DROP CAPACITY',\n  'DROP RESERVATION',\n  'DROP ASSIGNMENT',\n  // Script, https://cloud.google.com/bigquery/docs/reference/standard-sql/scripting\n  'DECLARE',\n  'SET',\n  'EXECUTE IMMEDIATE',\n  'LOOP',\n  'END LOOP',\n  'REPEAT',\n  'END REPEAT',\n  'WHILE',\n  'END WHILE',\n  'BREAK',\n  'LEAVE',\n  'CONTINUE',\n  'ITERATE',\n  'FOR',\n  'END FOR',\n  'BEGIN',\n  'BEGIN TRANSACTION',\n  'COMMIT TRANSACTION',\n  'ROLLBACK TRANSACTION',\n  'RAISE',\n  'RETURN',\n  'CALL',\n  // Debug, https://cloud.google.com/bigquery/docs/reference/standard-sql/debugging-statements\n  'ASSERT',\n  // Other, https://cloud.google.com/bigquery/docs/reference/standard-sql/other-statements\n  'EXPORT DATA',\n];\n\nconst reservedBinaryCommands = [\n  'INTERSECT',\n  'INTERSECT ALL',\n  'INTERSECT DISTINCT',\n  'UNION',\n  'UNION ALL',\n  'UNION DISTINCT',\n  'EXCEPT',\n  'EXCEPT ALL',\n  'EXCEPT DISTINCT',\n];\n\nconst reservedJoins = [\n  'JOIN',\n  'INNER JOIN',\n  'LEFT JOIN',\n  'LEFT OUTER JOIN',\n  'RIGHT JOIN',\n  'RIGHT OUTER JOIN',\n  'FULL JOIN',\n  'FULL OUTER JOIN',\n  'CROSS JOIN',\n];\n\n/**\n * Priority 3\n * keywords that follow a previous Statement, must be attached to subsequent data\n * can be fully inline or on newline with optional indent\n */\nconst reservedDependentClauses = ['WHEN', 'ELSE'];\n\n// https://cloud.google.com/bigquery/docs/reference/#standard-sql-reference\nexport default class BigQueryFormatter extends Formatter {\n  static operators = ['>>', '<<', '||'];\n  // TODO: handle trailing comma in select clause\n\n  tokenizer() {\n    return new Tokenizer({\n      reservedCommands,\n      reservedBinaryCommands,\n      reservedJoins,\n      reservedDependentClauses,\n      reservedKeywords: dedupe([\n        ...Object.values(reservedFunctions).flat(),\n        ...Object.values(reservedKeywords).flat(),\n      ]),\n      openParens: ['(', '['],\n      closeParens: [')', ']'],\n      stringTypes: [\n        // The triple-quoted strings are listed first, so they get matched first.\n        // Otherwise the first two quotes of \"\"\" will get matched as an empty \"\" string.\n        { quote: '\"\"\"..\"\"\"', prefixes: ['R', 'B', 'RB', 'BR'] },\n        { quote: \"'''..'''\", prefixes: ['R', 'B', 'RB', 'BR'] },\n        { quote: '\"\"', prefixes: ['R', 'B', 'RB', 'BR'] },\n        { quote: \"''\", prefixes: ['R', 'B', 'RB', 'BR'] },\n      ],\n      identTypes: ['``'],\n      identChars: { dashes: true },\n      positionalParams: true,\n      namedParamTypes: ['@'],\n      quotedParamTypes: ['@'],\n      lineCommentTypes: ['--', '#'],\n      operators: BigQueryFormatter.operators,\n      preprocess,\n    });\n  }\n}\n\nfunction preprocess(tokens: Token[]): Token[] {\n  return detectArraySubscripts(combineParameterizedTypes(tokens));\n}\n\n// Converts OFFSET token inside array from RESERVED_COMMAND to RESERVED_KEYWORD\n// See: https://cloud.google.com/bigquery/docs/reference/standard-sql/functions-and-operators#array_subscript_operator\nfunction detectArraySubscripts(tokens: Token[]) {\n  let prevToken = EOF_TOKEN;\n  return tokens.map(token => {\n    if (token.value === 'OFFSET' && prevToken.value === '[') {\n      prevToken = token;\n      return { ...token, type: TokenType.RESERVED_KEYWORD };\n    } else {\n      prevToken = token;\n      return token;\n    }\n  });\n}\n\n// Combines multiple tokens forming a parameterized type like STRUCT<ARRAY<INT64>> into a single token\nfunction combineParameterizedTypes(tokens: Token[]) {\n  const processed: Token[] = [];\n  for (let i = 0; i < tokens.length; i++) {\n    const token = tokens[i];\n    const nextToken = tokens[i + 1] || EOF_TOKEN;\n\n    if ((isToken.ARRAY(token) || isToken.STRUCT(token)) && nextToken.value === '<') {\n      const endIndex = findClosingAngleBracketIndex(tokens, i + 1);\n      const typeDefTokens = tokens.slice(i, endIndex + 1);\n      processed.push({\n        ...token,\n        value: typeDefTokens.map(t => t.value).join(''),\n        text: typeDefTokens.map(t => t.text).join(''),\n      });\n      i = endIndex;\n    } else {\n      processed.push(token);\n    }\n  }\n  return processed;\n}\n\nfunction findClosingAngleBracketIndex(tokens: Token[], startIndex: number): number {\n  let level = 0;\n  for (let i = startIndex; i < tokens.length; i++) {\n    const token = tokens[i];\n    if (token.value === '<') {\n      level++;\n    } else if (token.value === '>') {\n      level--;\n    } else if (token.value === '>>') {\n      level -= 2;\n    }\n    if (level === 0) {\n      return i;\n    }\n  }\n  return tokens.length - 1;\n}\n"],"mappings":"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"}